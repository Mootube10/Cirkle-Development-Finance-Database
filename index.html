<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Database - Cirkle Development</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; position: relative; }
        .container { max-width: 800px; margin: auto; }
        input, button { display: block; margin: 10px 0; width: 100%; padding: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #000; padding: 8px; text-align: left; }
        .logo { position: absolute; top: 10px; right: 10px; width: 100px; }
        .section { margin-top: 30px; padding: 10px; border: 1px solid #000; }
        .total { font-weight: bold; }
    </style>
</head>
<body>
    <img src="https://cdn.discordapp.com/attachments/1315278404009988107/1315740695365025792/Utilities_960_x_540_px.png?ex=67c9e383&is=67c89203&hm=faa571747fa02ef6f013fdafadb2d18d7660a5b97161c62b4e2589ca0db64f0b&" alt="Cirkle Development Logo" class="logo">
    
    <div class="container">
        <h2>Financial Database</h2>
        
        <div class="section">
            <h3>Group Funds Calculation</h3>
            <input type="number" id="groupFunds" placeholder="Enter Group Funds">
            <button onclick="saveGroupFunds()">Save Group Funds</button>
            <p><strong>Total Group Funds:</strong> $<span id="totalGroupFunds">0</span></p>
        </div>

        <div class="section">
            <h3>Roblox Tax Calculator</h3>
            <input type="number" id="robuxAmount" placeholder="Enter Robux">
            <button onclick="calculateTax()">Calculate</button>
            <p>After Tax: <span id="afterTax">0</span> Robux</p>
        </div>

        <div class="section">
            <h3>Planned Expenditures (Weekly Breakdown)</h3>
            <input type="text" id="week" placeholder="Week (Week 1, Week 2, etc.)">
            <input type="text" id="category" placeholder="Category (Fixed, Pay Slips, Discretionary)">
            <input type="text" id="description" placeholder="Description">
            <input type="number" id="amount" placeholder="Amount">
            <button onclick="addPlannedExpenditure()">Add Expenditure</button>
        </div>
        
        <div class="section">
            <h3>Monthly Robux Tracking</h3>
            <input type="text" id="month" placeholder="Month (January, February, etc.)">
            <input type="number" id="spent" placeholder="Robux Spent">
            <input type="number" id="earned" placeholder="Robux Earned">
            <button onclick="addMonthlyRecord()">Add Record</button>
        </div>
        
        <div class="section">
            <h3>Expenditure Summary</h3>
            <canvas id="spendingChart"></canvas>
        </div>
    </div>

    <script>
        function calculateTax() {
            let amount = parseFloat(document.getElementById("robuxAmount").value);
            if (!isNaN(amount)) {
                let afterTax = amount * 0.7;
                document.getElementById("afterTax").textContent = afterTax.toFixed(2);
            } else {
                document.getElementById("afterTax").textContent = "Invalid Input";
            }
        }

        function saveGroupFunds() {
            let funds = document.getElementById("groupFunds").value;
            if (funds && !isNaN(funds)) {
                localStorage.setItem("groupFunds", funds);
                document.getElementById("totalGroupFunds").textContent = funds;
            } else {
                alert("Please enter a valid amount for group funds.");
            }
        }

        function addPlannedExpenditure() {
            let week = document.getElementById("week").value;
            let category = document.getElementById("category").value;
            let description = document.getElementById("description").value;
            let amount = parseFloat(document.getElementById("amount").value);

            if (week && category && description && !isNaN(amount)) {
                let expenditures = JSON.parse(localStorage.getItem("expenditures")) || [];
                expenditures.push({ week, category, description, amount });
                localStorage.setItem("expenditures", JSON.stringify(expenditures));
                updateChart();
            } else {
                alert("Please fill in all fields with valid values.");
            }
        }

        function addMonthlyRecord() {
            let month = document.getElementById("month").value;
            let spent = parseFloat(document.getElementById("spent").value);
            let earned = parseFloat(document.getElementById("earned").value);

            if (month && !isNaN(spent) && !isNaN(earned)) {
                let records = JSON.parse(localStorage.getItem("monthlyRecords")) || [];
                records.push({ month, spent, earned });
                localStorage.setItem("monthlyRecords", JSON.stringify(records));
                updateChart();
            } else {
                alert("Please enter valid data for all fields.");
            }
        }

        function updateChart() {
            let records = JSON.parse(localStorage.getItem("monthlyRecords")) || [];
            let labels = records.map(record => record.month);
            let spentData = records.map(record => parseFloat(record.spent));
            let earnedData = records.map(record => parseFloat(record.earned));
            
            let ctx = document.getElementById("spendingChart").getContext("2d");
            new Chart(ctx, {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: [
                        { label: "Robux Spent", data: spentData, backgroundColor: "red" },
                        { label: "Robux Earned", data: earnedData, backgroundColor: "green" }
                    ]
                },
                options: { responsive: true }
            });
        }

        window.onload = function() {
            document.getElementById("totalGroupFunds").textContent = localStorage.getItem("groupFunds") || 0;
            updateChart();
        };
    </script>
</body>
</html>
